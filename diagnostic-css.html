<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Diagnostic CSS - DictaMed</title>
    <link rel="stylesheet" href="style.css">
    <style>
        body {
            font-family: Arial, sans-serif;
            padding: 20px;
            background: #f0f0f0;
        }
        .diagnostic-section {
            background: white;
            padding: 20px;
            margin: 10px 0;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .status-ok { color: green; font-weight: bold; }
        .status-error { color: red; font-weight: bold; }
        .status-warning { color: orange; font-weight: bold; }
        
        /* Test elements for CSS loading */
        .test-button {
            background: linear-gradient(135deg, #2563eb 0%, #10b981 100%);
            color: white;
            padding: 10px 20px;
            border: none;
            border-radius: 10px;
            font-weight: 600;
            cursor: pointer;
            margin: 5px;
            transition: all 0.3s ease;
        }
        
        .test-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(37, 99, 235, 0.3);
        }
        
        .test-modal {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: white;
            padding: 30px;
            border-radius: 16px;
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1);
            z-index: 10000;
            max-width: 400px;
            width: 90%;
        }
        
        pre {
            background: #f5f5f5;
            padding: 15px;
            border-radius: 5px;
            overflow-x: auto;
            font-size: 12px;
        }
    </style>
</head>
<body>
    <h1>üîç Diagnostic CSS - DictaMed</h1>
    
    <div class="diagnostic-section">
        <h2>1. Test de chargement des ressources</h2>
        <div id="resource-tests"></div>
    </div>
    
    <div class="diagnostic-section">
        <h2>2. Test d'affichage des √©l√©ments</h2>
        <button class="test-button" onclick="testAuthModal()">üîê Test Bouton Auth</button>
        <button class="btn btn-primary" onclick="testPrimaryButton()">Primary Button</button>
        <button class="btn btn-secondary">Secondary Button</button>
    </div>
    
    <div class="diagnostic-section">
        <h2>3. Test des variables CSS</h2>
        <div id="css-variables"></div>
    </div>
    
    <div class="diagnostic-section">
        <h2>4. Console JavaScript</h2>
        <div id="console-output"></div>
    </div>
    
    <div class="diagnostic-section">
        <h2>5. Test des styles appliqu√©s</h2>
        <div id="computed-styles"></div>
    </div>
    
    <!-- Modal de test -->
    <div id="testModal" class="test-modal hidden">
        <h3>üéâ Modal de test</h3>
        <p>Si vous voyez ce modal stylis√©, les CSS fonctionnent !</p>
        <button onclick="document.getElementById('testModal').classList.add('hidden')">Fermer</button>
    </div>

    <script>
        // Redirection de la console
        const originalLog = console.log;
        const originalError = console.error;
        const originalWarn = console.warn;
        
        let consoleMessages = [];
        
        console.log = function(...args) {
            consoleMessages.push({type: 'log', message: args.join(' ')});
            originalLog.apply(console, args);
        };
        
        console.error = function(...args) {
            consoleMessages.push({type: 'error', message: args.join(' ')});
            originalError.apply(console, args);
        };
        
        console.warn = function(...args) {
            consoleMessages.push({type: 'warn', message: args.join(' ')});
            originalWarn.apply(console, args);
        };
        
        // Test de chargement des ressources
        function testResourceLoading() {
            const tests = [
                {name: 'style.css', url: 'style.css'},
                {name: 'index.html', url: 'index.html'},
                {name: 'js/main.js', url: 'js/main.js'}
            ];
            
            const container = document.getElementById('resource-tests');
            container.innerHTML = '';
            
            tests.forEach(test => {
                const div = document.createElement('div');
                div.innerHTML = `<strong>${test.name}:</strong> <span class="status-loading">Test en cours...</span>`;
                container.appendChild(div);
                
                fetch(test.url)
                    .then(response => {
                        if (response.ok) {
                            div.innerHTML = `<strong>${test.name}:</strong> <span class="status-ok">‚úÖ Charg√© (${response.status})</span>`;
                        } else {
                            div.innerHTML = `<strong>${test.name}:</strong> <span class="status-error">‚ùå Erreur (${response.status})</span>`;
                        }
                    })
                    .catch(error => {
                        div.innerHTML = `<strong>${test.name}:</strong> <span class="status-error">‚ùå Erreur r√©seau: ${error.message}</span>`;
                    });
            });
        }
        
        // Test des variables CSS
        function testCSSVariables() {
            const container = document.getElementById('css-variables');
            const root = getComputedStyle(document.documentElement);
            
            const variables = [
                '--blue-primary',
                '--green-secondary',
                '--gray-dark',
                '--transition'
            ];
            
            let html = '<h3>Variables CSS charg√©es:</h3><ul>';
            variables.forEach(varName => {
                const value = root.getPropertyValue(varName);
                if (value) {
                    html += `<li><strong>${varName}:</strong> <span class="status-ok">${value}</span></li>`;
                } else {
                    html += `<li><strong>${varName}:</strong> <span class="status-error">Non d√©finie</span></li>`;
                }
            });
            html += '</ul>';
            container.innerHTML = html;
        }
        
        // Test du modal d'authentification
        function testAuthModal() {
            const modal = document.getElementById('testModal');
            modal.classList.remove('hidden');
        }
        
        function testPrimaryButton() {
            alert('Le bouton primary fonctionne !');
        }
        
        // Test des styles appliqu√©s
        function testComputedStyles() {
            const container = document.getElementById('computed-styles');
            const testElements = [
                {selector: 'body', name: 'Body'},
                {selector: '.test-button', name: 'Test Button'},
                {selector: '.btn', name: 'Button Class'}
            ];
            
            let html = '<h3>Styles calcul√©s:</h3><ul>';
            testElements.forEach(test => {
                const element = document.querySelector(test.selector);
                if (element) {
                    const computed = getComputedStyle(element);
                    html += `<li><strong>${test.name}:</strong> 
                        <br>Font-family: ${computed.fontFamily}
                        <br>Color: ${computed.color}
                        <br>Background: ${computed.background}
                        <br>Border-radius: ${computed.borderRadius}</li>`;
                } else {
                    html += `<li><strong>${test.name}:</strong> <span class="status-error">√âl√©ment non trouv√©</span></li>`;
                }
            });
            html += '</ul>';
            container.innerHTML = html;
        }
        
        // Affichage de la console
        function updateConsoleOutput() {
            const container = document.getElementById('console-output');
            let html = '<h3>Messages de la console:</h3>';
            if (consoleMessages.length === 0) {
                html += '<p class="status-ok">Aucun message</p>';
            } else {
                html += '<ul>';
                consoleMessages.forEach(msg => {
                    const className = msg.type === 'error' ? 'status-error' : 
                                    msg.type === 'warn' ? 'status-warning' : 'status-ok';
                    html += `<li><span class="${className}">[${msg.type.toUpperCase()}]</span> ${msg.message}</li>`;
                });
                html += '</ul>';
            }
            container.innerHTML = html;
        }
        
        // Initialisation des tests
        document.addEventListener('DOMContentLoaded', function() {
            console.log('üîç Diagnostic CSS d√©marr√©');
            
            setTimeout(() => {
                testResourceLoading();
                testCSSVariables();
                testComputedStyles();
                updateConsoleOutput();
            }, 1000);
            
            // Mise √† jour p√©riodique de la console
            setInterval(updateConsoleOutput, 2000);
        });
    </script>
</body>
</html>