<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DictaMed - DictÃ©e MÃ©dicale Intelligente</title>
    <link rel="stylesheet" href="style.css">
    <link rel="icon" type="image/png" sizes="32x32" href="icon-72x72.png">
    <link rel="icon" type="image/png" sizes="16x16" href="icon-72x72.png">
</head>
<body>
    <!-- Navigation fixe horizontale en header -->
    <div class="fixed-nav-header" id="fixedNavHeader">
        <div class="fixed-nav-container">
            <div class="nav-logo-left">
                <div class="header-logo">
                    <span class="logo-dicta">Dicta</span><span class="logo-med">Med</span>
                </div>
            </div>
            <div class="nav-tabs-right">
                <button class="fixed-nav-btn active" data-tab="home" onclick="switchTab('home')">
                    <span class="nav-icon">ğŸ </span>
                    Accueil
                </button>
                <button class="fixed-nav-btn" data-tab="mode-normal" onclick="switchTab('mode-normal')">
                    <span class="nav-icon">ğŸ¥</span>
                    Mode Normal
                </button>
                <button class="fixed-nav-btn" data-tab="mode-test" onclick="switchTab('mode-test')">
                    <span class="nav-icon">ğŸ§ª</span>
                    Mode Test
                </button>
                <button class="fixed-nav-btn" data-tab="mode-dmi" onclick="switchTab('mode-dmi')">
                    <span class="nav-icon">ğŸ“</span>
                    Saisie Texte
                </button>
                <button class="fixed-nav-btn" data-tab="guide" onclick="switchTab('guide')">
                    <span class="nav-icon">ğŸ“–</span>
                    Guide
                </button>
                <button class="fixed-nav-btn" data-tab="faq" onclick="switchTab('faq')">
                    <span class="nav-icon">â“</span>
                    FAQ
                </button>
                <button class="fixed-nav-btn auth-btn" id="authButton" onclick="toggleAuthModal()">
                    <span class="nav-icon">ğŸ”</span>
                    <span id="authButtonText">Connexion</span>
                </button>
            </div>
        </div>
    </div>

    <main class="container">
        <!-- Navigation par onglets originale (maintenant cachÃ©e) -->
        <nav class="tabs-nav" style="display: none;">
            <div class="tabs-container">
                <button class="tab-btn active" data-tab="home">
                    <span class="tab-icon">ğŸ </span>
                    Accueil
                </button>
                <button class="tab-btn" data-tab="mode-normal">
                    <span class="tab-icon">ğŸ¥</span>
                    Mode Normal
                </button>
                <button class="tab-btn" data-tab="mode-test">
                    <span class="tab-icon">ğŸ§ª</span>
                    Mode Test
                </button>
                <button class="tab-btn" data-tab="mode-dmi">
                    <span class="tab-icon">ğŸ“</span>
                    Saisie Texte
                </button>
                <button class="tab-btn" data-tab="guide">
                    <span class="tab-icon">ğŸ“–</span>
                    Guide
                </button>
                <button class="tab-btn" data-tab="faq">
                    <span class="tab-icon">â“</span>
                    FAQ
                </button>
            </div>
            <div class="swipe-hint">â† Glissez pour naviguer â†’</div>
        </nav>

        <!-- Contenu des onglets - Conteneur dynamique -->
        <div id="tab-content" class="tab-content active">
            <!-- Le contenu sera chargÃ© dynamiquement ici -->
            <div class="loading-content">
                <p>Chargement...</p>
            </div>
        </div>

        <!-- RÃ©sultat Google Sheet (cachÃ© par dÃ©faut) -->
        <div id="googleSheetCard" class="card google-sheet-result" style="display: none;">
            <h2>âœ… DonnÃ©es envoyÃ©es avec succÃ¨s !</h2>
            <p>Vos enregistrements ont Ã©tÃ© transcrits et sont disponibles dans le Google Sheet public :</p>
            <a href="https://docs.google.com/spreadsheets/d/1example" target="_blank" class="btn btn-primary">
                ğŸ“Š Consulter le Google Sheet
            </a>
            <p class="note">Les donnÃ©es restent disponibles dans le sheet public pendant 24h.</p>
        </div>
    </main>

    <footer>
        <div class="container">
            <p>&copy; 2024 DictaMed - DictÃ©e mÃ©dicale intelligente</p>
            <p>Pour toute question ou assistance, contactez <a href="mailto:support@dictamed.fr">support@dictamed.fr</a></p>
        </div>
    </footer>

    <!-- Modal d'authentification optimisÃ© -->
    <div id="authModal" class="auth-modal hidden">
        <div class="auth-modal-content">
            <div class="auth-modal-header">
                <div class="auth-modal-logo">
                    <span class="logo-dicta">Dicta</span><span class="logo-med">Med</span>
                </div>
                <h2 id="authModalTitle">Connexion</h2>
                <button class="auth-modal-close" onclick="closeAuthModal()" aria-label="Fermer">&times;</button>
            </div>
            
            <div class="auth-modal-body">
                <div class="auth-mode-toggle">
                    <button type="button" id="modalSignInTab" class="auth-tab-btn active">
                        <span class="auth-tab-icon">ğŸ”</span>
                        Connexion
                    </button>
                    <button type="button" id="modalSignUpTab" class="auth-tab-btn">
                        <span class="auth-tab-icon">âœ¨</span>
                        Inscription
                    </button>
                </div>
                
                <form id="modalEmailAuthForm" class="auth-email-form">
                    <div class="form-group-modern">
                        <label for="modalEmailInput">
                            <span class="input-icon">ğŸ“§</span>
                            Email
                        </label>
                        <input type="email" id="modalEmailInput" placeholder="votre@email.com" required autocomplete="email">
                    </div>
                    
                    <div class="form-group-modern">
                        <label for="modalPasswordInput">
                            <span class="input-icon">ğŸ”’</span>
                            Mot de passe
                        </label>
                        <div class="password-input-wrapper">
                            <input type="password" id="modalPasswordInput" placeholder="â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢" required autocomplete="current-password">
                            <button type="button" class="password-toggle" onclick="togglePasswordVisibility()" aria-label="Afficher le mot de passe">
                                <span class="eye-icon">ğŸ‘ï¸</span>
                            </button>
                        </div>
                        <div class="password-strength hidden" id="passwordStrength">
                            <div class="strength-bar"></div>
                            <span class="strength-text">Force du mot de passe</span>
                        </div>
                    </div>
                    
                    <div class="auth-options">
                        <label class="remember-me">
                            <input type="checkbox" id="rememberMe">
                            <span class="checkmark"></span>
                            Se souvenir de moi
                        </label>
                        <a href="#" class="forgot-password" onclick="showForgotPassword()">Mot de passe oubliÃ© ?</a>
                    </div>
                    
                    <button type="submit" id="modalEmailSubmitBtn" class="btn btn-primary btn-full btn-glow">
                        <span class="btn-text">Se connecter</span>
                        <span class="btn-icon">â†’</span>
                        <div class="loading-spinner-small hidden"></div>
                    </button>
                    
                    <div class="auth-separator">
                        <span>ou continuer avec</span>
                    </div>
                    
                    <button type="button" id="modalGoogleSignInBtn" class="btn btn-google btn-full">
                        <svg class="google-icon" viewBox="0 0 24 24">
                            <path fill="#4285F4" d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"/>
                            <path fill="#34A853" d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"/>
                            <path fill="#FBBC05" d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"/>
                            <path fill="#EA4335" d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"/>
                        </svg>
                        Continuer avec Google
                    </button>
                    
                    <div id="modalAuthError" class="auth-error hidden"></div>
                    
                    <div class="auth-footer">
                        <p class="terms-text">
                            En vous connectant, vous acceptez nos 
                            <a href="#">Conditions d'utilisation</a> et 
                            <a href="#">Politique de confidentialitÃ©</a>
                        </p>
                    </div>
                </form>
                
                <!-- Profil utilisateur (affichÃ© si connectÃ©) -->
                <div id="modalUserProfile" class="user-profile-compact hidden">
                    <div class="user-info-modern">
                        <div class="user-avatar-modern" id="modalUserAvatar">
                            <div class="avatar-placeholder-modern" id="modalAvatarPlaceholder">ğŸ‘¤</div>
                            <div class="avatar-status-indicator"></div>
                        </div>
                        <div class="user-details-modern">
                            <h4 id="modalUserName">Utilisateur</h4>
                            <p id="modalUserEmail">email@example.com</p>
                            <span class="connection-status-modern">
                                <span class="status-dot"></span>
                                ConnectÃ©
                            </span>
                        </div>
                    </div>
                    <div class="user-actions-modern">
                        <button class="btn btn-outline" onclick="switchTab('mode-normal'); closeAuthModal();">
                            <span>ğŸ¥</span> Mode Normal
                        </button>
                        <button id="modalSignOutBtn" class="btn btn-danger">
                            <span>ğŸšª</span> DÃ©connexion
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-analytics-compat.js"></script>
    <script src="firebase-config.js"></script>
    <script src="script.js"></script>

</body>
</html>